; PHP Configuration for LAMP Stack

[PHP]
; Resource Limits
memory_limit = {{ php.settings.memory_limit | default('256M') }}
max_execution_time = {{ php.settings.max_execution_time | default('300') }}
max_input_time = 300

; File Uploads
file_uploads = On
upload_max_filesize = {{ php.settings.upload_max_filesize | default('64M') }}
max_file_uploads = 20
post_max_size = {{ php.settings.post_max_size | default('64M') }}

; Error Handling
display_errors = {{ php.settings.display_errors | default('Off') }}
display_startup_errors = Off
log_errors = {{ php.settings.log_errors | default('On') }}
error_log = /var/log/php_errors.log
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT

; Security
expose_php = Off
allow_url_fopen = On
allow_url_include = Off

; Session Configuration
session.save_handler = files
session.save_path = "/var/lib/php/sessions"
session.use_cookies = 1
session.use_only_cookies = 1
session.name = PHPSESSID
session.cookie_secure = 0
session.cookie_httponly = 1
session.cookie_samesite = "Strict"

; Date/Time
date.timezone = {{ timezone | default('UTC') }}

; MySQL/MySQLi
mysql.default_port = {{ mysql.port | default(3306) }}
mysqli.default_port = {{ mysql.port | default(3306) }}

; OPcache (if available)
opcache.enable = 1
opcache.enable_cli = 1
opcache.memory_consumption = 128
opcache.interned_strings_buffer = 8
opcache.max_accelerated_files = 4000
opcache.revalidate_freq = 2
opcache.fast_shutdown = 1
